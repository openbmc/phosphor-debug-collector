{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "016f1876_bdd823be",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000008
      },
      "writtenOn": "2023-11-09T20:09:24Z",
      "side": 1,
      "message": "Looked at some timings just to make sure logging would be alive when this was called, and based on the journal below I think it would be fine:\n\nNov 09 18:03:45 ever8bmc systemd[1]: Starting Phosphor Dump Manager...\nNov 09 18:03:45 ever8bmc systemd[1]: Starting Phosphor Log Manager...\nNov 09 18:03:57 ever8bmc systemd[1]: Started Phosphor Log Manager.\nNov 09 18:03:57 ever8bmc systemd[1]: Started Phosphor Dump Manager.\nNov 09 18:03:58 ever8bmc systemd[1]: Ramoops monitor. was skipped because of an unmet condition check (ConditionPathExistsGlob\u003d/var/lib/systemd/pstore/dmesg-ramoops-*).",
      "revId": "7d06930a42ac54ee981ede74bd710ed1e02ec43b",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5ee087cc_8e1383ae",
        "filename": "ramoops_manager.cpp",
        "patchSetId": 1
      },
      "lineNbr": 34,
      "author": {
        "id": 1000086
      },
      "writtenOn": "2023-11-10T03:29:08Z",
      "side": 1,
      "message": "This is the correct app to add check related to reboot is related to Kernel panic or due to power loss.\nThe proposed logic, based on pstore files presence base check, is going to good for the BMC Kernel  which enables Pstore \u0026 Ramoops Setup. ( https://stackoverflow.com/questions/28538091/using-persistent-storage-in-linux-kernel). Also not covered error scenarios, like missing pstore file due t some errors.\n\nAnother approach would be add code to create log in the clean shutdown or reboot path and check here ( Reference :https://unix.stackexchange.com/questions/692624/can-i-reliably-determine-if-the-last-reboot-was-due-to-a-kernel-panic).\n\nAdding Andrew to comment, who worked on this area initially.",
      "revId": "7d06930a42ac54ee981ede74bd710ed1e02ec43b",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "894d50f3_d2fded9b",
        "filename": "ramoops_manager.cpp",
        "patchSetId": 1
      },
      "lineNbr": 34,
      "author": {
        "id": 1000009
      },
      "writtenOn": "2023-11-10T03:36:17Z",
      "side": 1,
      "message": "Sorry, I\u0027m having a little trouble understanding what it is I should be commenting on. Is there a problem?",
      "parentUuid": "5ee087cc_8e1383ae",
      "revId": "7d06930a42ac54ee981ede74bd710ed1e02ec43b",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1e33bc6d_2f52978b",
        "filename": "ramoops_manager.cpp",
        "patchSetId": 1
      },
      "lineNbr": 34,
      "author": {
        "id": 1000086
      },
      "writtenOn": "2023-11-10T05:07:45Z",
      "side": 1,
      "message": "Andrew\u0027s proposed logic covers all the scenarios related Unexepected BMC reboots due to kernel panic use case.  Or should we approch other way i mentioned above?",
      "parentUuid": "894d50f3_d2fded9b",
      "revId": "7d06930a42ac54ee981ede74bd710ed1e02ec43b",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ef550efe_63196be1",
        "filename": "ramoops_manager.cpp",
        "patchSetId": 1
      },
      "lineNbr": 34,
      "author": {
        "id": 1000021
      },
      "writtenOn": "2023-11-10T06:13:35Z",
      "side": 1,
      "message": "The second link discusses why a kernel panic won\u0027t display in the journal or other userspace saving the kernel logs to disk.\n\nlogging a clean shutdown is inherently racy , and even describing it as an intent leaves time windows where the panic happens during shutdown.   Also, the ramoops dump will try to include a stack dump and the kernel log content nearby the panic.\n\nIf this was trying to create an entry for evey boot then logging intent to reboot might help disambiguation between panic, power loss, and intentionally reboot; however this commit is about saving ramoops in a sel and dump.",
      "parentUuid": "1e33bc6d_2f52978b",
      "revId": "7d06930a42ac54ee981ede74bd710ed1e02ec43b",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    }
  ]
}