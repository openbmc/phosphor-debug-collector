{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "de0cc1cd_0d81f630",
        "filename": "tools/dreport.d/plugins.d/hoststate",
        "patchSetId": 4
      },
      "lineNbr": 9,
      "author": {
        "id": 1000086
      },
      "writtenOn": "2025-10-10T14:16:14Z",
      "side": 1,
      "message": "Nit: Optimize this logic with single host file name same as previously?\nservices\u003d$(busctl list | awk \u0027{print $1}\u0027 | grep -E \"xyz.openbmc_project.State.Host([0-9]*)?$\")\n\nfor service in ${services}; do\n    objpath\u003d$(busctl tree --list $service | tail -n 1)\n    index\u003d$(echo \"$service\" | grep -o \u0027[0-9]*$\u0027)\n\n    if [ -z \"$index\" ]; then\n        file_name\u003d\"host-state.log\"\n        desc\u003d\"Host State\"\n    else\n        file_name\u003d\"host${index}-state.log\"\n        desc\u003d\"Host${index} State\"\n    fi\n\n    command\u003d\"busctl get-property ${service} ${objpath} \\\n              xyz.openbmc_project.State.Host CurrentHostState\"\n    add_cmd_output \"$command\" \"$file_name\" \"$desc\"\ndone",
      "revId": "f218b7149002945450bcf3df0b53f2ebeb11eee6",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    }
  ]
}