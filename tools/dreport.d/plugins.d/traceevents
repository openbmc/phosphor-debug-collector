#!/bin/bash
#
# config: 12 99
# @brief: Collect kernel event tracing
#

. $DREPORT_INCLUDE/functions

desc="Kernel event traces"
file_name="/sys/kernel/tracing/trace"
snapshot_name="/sys/kernel/debug/tracing/snapshot"

if [ -f "$snapshot_name" ]; then
    echo 1 > "$snapshot_name"
    file_name="$snapshot_name"
fi

add_copy_file "$file_name" "$desc"
if [ -f "$snapshot_name" ]; then
    echo 0 > "$snapshot_name"
fi
