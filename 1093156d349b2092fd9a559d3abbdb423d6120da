{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "a3aa9cc3_65f8731b",
        "filename": "dump-extensions/openpower-dumps/dump_manager_system.cpp",
        "patchSetId": 27
      },
      "lineNbr": 49,
      "author": {
        "id": 1000004
      },
      "writtenOn": "2023-06-05T15:22:43Z",
      "side": 1,
      "message": "So just to confirm, if it has the same ID, but it\u0027s not completed, the expected behavior is to create a new dump with the same ID? The code will all handle that ok? Or do we need to delete the dump with the same ID first?",
      "revId": "1093156d349b2092fd9a559d3abbdb423d6120da",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "eb4af6cb_4d35d618",
        "filename": "dump-extensions/openpower-dumps/dump_manager_system.cpp",
        "patchSetId": 27
      },
      "lineNbr": 49,
      "author": {
        "id": 1000084
      },
      "writtenOn": "2023-06-05T15:30:51Z",
      "side": 1,
      "message": "Another dump with same name won\u0027t come because only one dump at a time and this dump needs to be deleted to create a new one",
      "parentUuid": "a3aa9cc3_65f8731b",
      "revId": "1093156d349b2092fd9a559d3abbdb423d6120da",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e6656862_30687f9f",
        "filename": "dump-extensions/openpower-dumps/dump_manager_system.cpp",
        "patchSetId": 27
      },
      "lineNbr": 49,
      "author": {
        "id": 1000004
      },
      "writtenOn": "2023-06-06T14:55:27Z",
      "side": 1,
      "message": "It just feels like a possible bug. We get into some situation where the dumpId is present in the entries but for whatever reason it was not Completed. Would everything work ok with the below code as-is in this scenario or should we have an else clause to this to ensure we clean it up?",
      "parentUuid": "eb4af6cb_4d35d618",
      "revId": "1093156d349b2092fd9a559d3abbdb423d6120da",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5b2e725c_e05d066b",
        "filename": "dump-extensions/openpower-dumps/dump_manager_system.cpp",
        "patchSetId": 27
      },
      "lineNbr": 49,
      "author": {
        "id": 1000084
      },
      "writtenOn": "2023-06-06T16:24:00Z",
      "side": 1,
      "message": "This dump is not stored in the BMC and Host sends the message only after the completion, so the source dump id is present only for a completed dump(please don\u0027t confuse it with the id BMC assigned, this is assigned by the host)\n\nI feel it is very similar to what we do in the restart of applications, the notifications are sent again to be filtered somewhere else. \n\n\nThis happens rarely, but if we don\u0027t filter, we will have the same dump with two entries.\n\nWhat we can do in `else` is to add a trace saying ignored a duplicate entry",
      "parentUuid": "e6656862_30687f9f",
      "revId": "1093156d349b2092fd9a559d3abbdb423d6120da",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d93f98cf_093f6605",
        "filename": "dump-extensions/openpower-dumps/dump_manager_system.cpp",
        "patchSetId": 27
      },
      "lineNbr": 49,
      "author": {
        "id": 1000004
      },
      "writtenOn": "2023-06-07T15:42:04Z",
      "side": 1,
      "message": "Yeah, instead of trying to be absolutely sure the host never sends down a dump that does not get into a Completed state, lets just at least leave a bread crumb for us in the journal doing an \"else if (sysEntry-\u003esourceDumpId() \u003d\u003d dumpId) {lg2::info (\"System dump entry with ... is already present but not Completed\"}\" and then just continue. At least we\u0027ll have a debug point if it were to ever happen.",
      "parentUuid": "5b2e725c_e05d066b",
      "revId": "1093156d349b2092fd9a559d3abbdb423d6120da",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "1fbdcb34_c5541be2",
        "filename": "dump-extensions/openpower-dumps/dump_manager_system.cpp",
        "patchSetId": 27
      },
      "lineNbr": 49,
      "author": {
        "id": 1000084
      },
      "writtenOn": "2023-06-07T17:18:56Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d93f98cf_093f6605",
      "revId": "1093156d349b2092fd9a559d3abbdb423d6120da",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "35a022c8_958efb62",
        "filename": "dump-extensions/openpower-dumps/dump_manager_system.cpp",
        "patchSetId": 27
      },
      "lineNbr": 49,
      "author": {
        "id": 1000084
      },
      "writtenOn": "2023-06-08T05:08:29Z",
      "side": 1,
      "message": "As per our design, a dump is marked as completed only when both the dump id and size are successfully received from the host. so, we only have one active dump at any given time. Because a new dump cannot be generated unless the existing one is deleted first, the possibility of having an incomplete dump entry with the same id is nearly negligible.\n\nBut, as per our discussion, to catch any errors, I will add an \u0027else\u0027 clause for logging incomplete dump entry with the same id is detected.",
      "parentUuid": "1fbdcb34_c5541be2",
      "revId": "1093156d349b2092fd9a559d3abbdb423d6120da",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    }
  ]
}